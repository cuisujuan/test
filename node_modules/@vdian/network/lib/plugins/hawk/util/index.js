import { isMobile } from '@vdian/user-agent';
import { DOCUMENT } from '../../../constants';
var DEFAULT_SCALE = 1;
var TOAST_DURATION = 1500;
function getScale() {
    if (isMobile()) {
        var viewports = document.querySelectorAll('meta[name="viewport"]');
        // 最后一个viewport才生效
        var viewport = viewports[viewports.length - 1];
        if (viewport) {
            // 属性不存在返回null
            var content = viewport.getAttribute('content');
            var matchs = content && content.match(/initial\-scale=([\d\.]+)/);
            return matchs ? 1 / Number(matchs[1]) : DEFAULT_SCALE;
        }
    }
    return DEFAULT_SCALE;
}
/**
 * @ignore
 */
export function toast(message) {
    var scale = getScale();
    // tslint:disable-next-line: max-line-length
    var html = "<div class=\"hawk-toast\">" + message + "</div><style type=\"text/css\">.hawk-toast{position:fixed;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10000;width:50%;color:#fff;background:rgba(33,33,33,0.9);line-height:1.5;border-radius:" + 8 *
        scale + "px;max-width:" + 300 * scale + "px;padding:" + 20 *
        scale + "px;font-size:" + 16 * scale + "px;}</style>";
    var body = DOCUMENT.body;
    if (body) {
        var element_1 = DOCUMENT.createElement('div');
        element_1.innerHTML = html;
        body.appendChild(element_1);
        setTimeout(function () {
            body.removeChild(element_1);
        }, TOAST_DURATION);
    }
}
