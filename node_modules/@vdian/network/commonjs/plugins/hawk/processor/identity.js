"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.identity = void 0;
var util_1 = require("../../../util");
var constants_1 = require("../../../constants");
var url_1 = require("@vdian/url");
var util_2 = require("../util");
// 实名认证处理
var IDENTITY_CODES = 20;
var IDENTITY_REDIRECT_KEY = 'redirect';
var IDENTITY_TIMEOUT = 1000;
/**
 * @ignore
 * false：中断后续代码执行，true：不中断执行
 * @param data 传入的响应数据
 * @returns boolean
 */
function identity(data) {
    var _a;
    if (util_1.isObject(data)) {
        var status_1 = util_1.isObject(data.status) ? data.status : {};
        var result = util_1.isObject(data.result) ? data.result : {};
        var url_2 = result.authPageUrl;
        // 如果符合实名认证条件
        if (status_1.code == IDENTITY_CODES && url_2) {
            // 追加当前页面redirect参数
            url_2 = url_1.setQuerystring(url_2, (_a = {},
                _a[IDENTITY_REDIRECT_KEY] = constants_1.GLOBAL.location.href,
                _a));
            result.message && util_2.toast(result.message);
            setTimeout(function () {
                util_1.goto(url_2);
            }, IDENTITY_TIMEOUT);
            return false;
        }
    }
    return true;
}
exports.identity = identity;
