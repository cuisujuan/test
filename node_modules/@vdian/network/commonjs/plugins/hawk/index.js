"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var processor_1 = require("./processor");
var intercept_1 = require("./intercept");
var constants_1 = require("../../constants");
// 暴露全局属性，用于记录是否已初始化
constants_1.GLOBAL.hawk = constants_1.GLOBAL.hawk || {
    disabled: false
};
// 拦截处理
function interceptHandler() {
    intercept_1.default({
        beforeSuccess: function (response, next) {
            // 实名认证处理，不符合则执行业务代码
            if (processor_1.identity(response)) {
                next();
            }
        }
    });
}
/**
 * @ignore
 */
function hawk() {
    if (constants_1.GLOBAL.hawk.disabled) {
        return;
    }
    interceptHandler();
    constants_1.GLOBAL.hawk.disabled = true;
}
exports.default = hawk;
