# 前端安全库V1.0.0

## 方案

### HTML代码中输出内容必须对 < > ' " & ` 转义

通过对特殊字符转义杜绝掉从输入数据进来的xss攻击。

### JAVASCRIPT代码中输出内容必须对 ' " / \ 转义

后端出的数据全部为 `string`

```
' : \'
" : \"
/ : \/
\ : \\
```

```
// 为什么对 \ 转义
// \";alert(1); 为输入源
// 服务端对 " 转义为 \"
// 最终得到 \\";alert(1);
var data = " ";


// 为什么对 / 转义
// </script><script>alert(1)</script>  为输入源
// </script> 可闭合script标签
// 最终可插入一段脚本
var data = " ";
```

### 代理掉跳转方法

通过代理掉跳转方法，主要做下面几件事情：

1. 杜绝  `javacript:`  `data:` 伪协议的执行；

   > 检测跳转url是否包含 javacript: data: 等伪协议。

2. 检测链接是否在白名单内，杜绝钓鱼；

3. 增加 `配置项：useWhiteList` 配置是否启用`检测白名单`功能；

4. 增加 `addWhiteDomain`  方法，增加白名单域名；

具体需要代理的方法包括：

```
window.location.href 无法代理

window.location.replace 无法代理

window.location.assign 无法代理

window.open
```

## 实现

### 增加 `option` 方法配置参数

### 增加 `escape` 方法过滤 < > ' " & `

### 增加 `isLegalUrl` 方法检测链接是否合法

### 增加 `filterUrl` 方法过滤链接

### 增加 `jump` 安全跳转方法

### 增加 `replaceJump` 安全 replace 方法
