# vbuilder

![Mac Available](https://img.shields.io/badge/Mac-available-brightgreen.svg) ![Windows Unavailable](https://img.shields.io/badge/Windows-unavailable-red.svg) [![Node version](https://img.shields.io/badge/node-%3E%3D%208.9.1-brightgreen.svg)](http://nodejs.org/) [![Npm Version](https://img.shields.io/badge/npm-%3E%3D%205.5.1-brightgreen.svg)](https://www.npmjs.com/)

## vbuilder 是什么

前端开发一站式解决方案。

使用 vbuilder，您将只需关注业务逻辑，无需关注脚手架、mock 等配置信息，即可快速完成前端开发。

**vbuilder 是微店内部使用的版本，我们也有一个开源版：[bio](https://github.com/weidian-inc/bio-cli)，您可以用来开发自有项目**

![vbuilder 使用前后](https://gitlab.vdian.net/fe-workflow/fe-service-team/uploads/0db0179ec98f6ece5ce1094f392c6833/image.png)

## 安装

+   安装 Node.js（>= 8.9.1）

    https://nodejs.org/en/download/

+   安装 vbuilder

    ```
    [sudo] npm install @vdian/vbuilder-cli -g --registry=http://npm.idcvdian.com
    ```
    
## 快速使用

+   第 1 步：创建项目目录

    ```
    mkdir demo

    cd demo
    ```
    
+   第 2 步：初始化各类项目
    +   `v init vue`：  初始化 vue 项目
    +   `v init react`：初始化 react 项目
    +   `v init pure`：  初始化 非 vue / 非 react 项目
    
+   第 3 步：调试
    
    ```
    v run dev-daily
    ```

## 命令集

### 项目开发

+   `v init <脚手架在 npm 源上的名称>`

    +   功能

        初始化项目目录。

        该命令会完成以下动作：

        +   在本地安装脚手架，以确保脚手架存在。**脚手架安装在 vbuilder 缓存目录（`/Users/用户名/.vbuilder/`）**
        +   如果当前目录是空目录（或只有 `README.md`），该命令会为生成 demo 文件。
        +   执行 `npm install`。

    +   脚手架
    
        vbuilder 目前内置了三个脚手架（`vue`、`react`、`pure`）

        vbuilder 使用 npm 托管脚手架，默认托管在 **微店 npm 源**

    +   脚手架昵称

        vbuilder 为内置的三个脚手架都取了昵称：

        ```
        @vdian/mechanic --> vue
        @vdian/react --> react
        @vdian/pure-js --> pure
        ```

        **所以所有涉及脚手架名称的命令，均可以用昵称代替。**

+   `v run <脚手架支持的任务> [-n, --no-watch]`

    +   功能

        启动脚手架任务。

        vbuilder 会启动脚手架，并透传任务名称到脚手架，以完成各类任务。

        所以，任务名称是可变的，只要脚手架支持就可以。

        我们默认提供的三个脚手架都提供了以下 6 种任务：
        
        ```
        dev-daily
        dev-pre
        dev-prod
        build-daily
        build-pre
        build-prod
        ```

        详细信息可查看：[vbuilder 内置脚手架任务名称](./docs/目前vbuilder可用的脚手架.md)。

        举例：初始化完 `vue` 项目后，启动它的 `dev-daily` 任务，命令即为：

        ```
        v run dev-daily
        ```

    +   选项 `-n, --no-watch` 介绍：

        vbuilder 默认会 **启动** 一个文件监听服务，同步当前目录文件到脚手架目录，保证脚手架目录与业务目录始终是父子关系，供脚手架编译。（资料：（[为什么要保证父子关系?](https://github.com/hoperyy/deep-webpack/issues/8)））

        `-n, --no-watch` 会**关闭**同步当前目录到脚手架目录的文件监听服务。

        举例：

        ```
        v run dev-daily -n
        ```

### 脚手架

+   `v show <脚手架在 npm 源上的名称>`

    打开脚手架所在的本地目录。

+   `v create`

    创建脚手架，会提示你新的脚手架名称
    
### mock

+   `v mock [端口]`

    启动本地 mock 服务，默认端口是 7000

    如果希望指定端口号，可以直接指定，如：`v mock 8000`

### 代码质量检查

+   `v lint init [-t, --type [value]]`

    +   功能

        初始化 lint，会自动在 git commit 前挂载 lint 执行钩子

    +   选项 `[-t, --type [value]]` 介绍

        默认初始化 es6 规则，如果希望在某个目录初始化 es5 功能，可以进入该目录，执行：

        ```
        v lint init -t es5
        ```

        目前支持两种类型：`es5、es6`

+   `v lint [--fix] [-w, --watch]`

    执行 lint 检查，vbuilder 会为你生成 lint 结果页面进行查看

    +   `--fix`：自动修正源码中的代码格式。
    +   `-w, --watch`：启动文件监听，文件一旦有变化，会触发 lint 检查

### 帮助信息

+   `v help`

    help 信息

## 链接

+   [目前可用的脚手架](./docs/目前vbuilder可用的脚手架.md)
+   [开发 vbuilder 脚手架](./docs/开发vbuilder脚手架.md)

## vbuilder 的特点

![](https://gitlab.vdian.net/fe-workflow/fe-service-team/uploads/d122bc672bd0e663b9e7201228be4c0b/image.png)

![](https://gitlab.vdian.net/fe-workflow/fe-service-team/uploads/cf40bf5e6f957d417d3f488cd0127987/image.png)

## TODO

+   完善单元测试
+   持续集成
+   English Docs
+   完善脚手架项目 demo

## 开发者

+   Core：[刘远洋](https://github.com/hoperyy)
+   Lint：[丁俊杰](https://github.com/IOriens)

## LICENSE

MIT
