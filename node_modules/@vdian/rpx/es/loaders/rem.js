import { getOptions } from 'loader-utils';
import * as postcss from 'postcss';
import * as rem from '../plugins/rem';
function handler(input, options) {
    return postcss([rem(options)])
        .process(input, {
        from: undefined
    })
        .then(function (result) {
        return result.css;
    });
}
function loader(source) {
    var callback = this.async();
    var options = getOptions(this);
    handler(source, options).then(function (css) {
        callback(null, css);
    }, callback);
}
/**
 * @ignore
 */
module.exports = loader;
/**
 * @ignore
 */
export default loader;
